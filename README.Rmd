---
output: github_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  echo = FALSE,
  message = FALSE
)

txt2md <- function(path){
  df <- readr::read_delim(path, delim = "\t")
  knitr::kable(df)
}
```

EMODnet web service documentation
==================================
## R tutorial
Try out the EMODnet OGC web services in our R tutorial.
View the tutorial [here](./R-tutorial) or run it interactively with Binder:

[![Binder](https://mybinder.org/badge_logo.svg)](https://mybinder.org/v2/gh/EMODnet/Web-Service-Documentation/main?urlpath=lab/tree/R-tutorial/index.ipynb)

## Documentation

This document has links to all EMODnet web services that allow you to search, visualise and download EMODnet data and data products.

### Metadata services

The EMODnet central catalogue offers the ability to search collections of metadata for data,
services and related information objects related to the different EMODnet thematics. The data catalogues offer a **CSW** endpoint to other client
applications to connect to the service and query the available metadata records.


```{r csw}
txt2md("data/csw.txt")
```

#### CSW GetCapabilities

The mandatory GetCapabilities operation allows CSW clients to retrieve
service metadata from a server. The response to a GetCapabilities
request shall be an XML document containing service metadata about the
server. This subclause specifies the XML document that a CSW server
shall return to describe its capabilities.

#### CSW GetRecords

GetRecords requests allows to query and filter the catalogue metadata records.

GetRecords example:

>   [https://emodnet.ec.europa.eu/geonetwork/emodnet/eng/csw?REQUEST=GetRecords&SERVICE=CSW&VERSION=2.0.2&ELEMENTSETNAME=summary&OUTPUTSCHEMA=http://www.opengis.net/cat/csw/2.0.2&CONSTRAINTLANGUAGE=FILTER&CONSTRAINT_LANGUAGE_VERSION=1.1.0&RESULTTYPE=results&TYPENAMES=csw:Record&CONSTRAINT=&lt;ogc:Filter xmlns:ogc="http://www.opengis.net/ogc"&gt;&lt;ogc:PropertyIsEqualTo&gt;&lt;ogc:PropertyName&gt;dc:type&lt;/ogc:PropertyName&gt;&lt;ogc:Literal&gt;dataset&lt;/ogc:Literal&gt;&lt;/ogc:PropertyIsEqualTo&gt;&lt;/ogc:Filter&gt;&maxRecords=10](https://emodnet.ec.europa.eu/geonetwork/emodnet/eng/csw?REQUEST=GetRecords&SERVICE=CSW&VERSION=2.0.2&ELEMENTSETNAME=summary&OUTPUTSCHEMA=http://www.opengis.net/cat/csw/2.0.2&CONSTRAINTLANGUAGE=FILTER&CONSTRAINT_LANGUAGE_VERSION=1.1.0&RESULTTYPE=results&TYPENAMES=csw:Record&CONSTRAINT=%3Cogc:Filter%20xmlns:ogc=%22http://www.opengis.net/ogc%22%3E%3Cogc:PropertyIsEqualTo%3E%3Cogc:PropertyName%3Edc:type%3C/ogc:PropertyName%3E%3Cogc:Literal%3Edataset%3C/ogc:Literal%3E%3C/ogc:PropertyIsEqualTo%3E%3C/ogc:Filter%3E&maxRecords=10)

#### CSW GetRecordById

GetRecordById requests retrieves catalogue metadata records using their
identifier.

GetRecordById example

>   https://emodnet.ec.europa.eu/geonetwork/emodnet/eng/csw?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id=5c0f13ee-098a-442c-abfc-d4c08a527476

### Data visualisation services
#### Web Map Service (WMS) 

The Web Map Service standard (**WMS**) provides a simple HTTP interface
for requesting geo-registered map images from one or more distributed
geospatial databases. A WMS request defines the geographic layer(s) and
area of interest to be processed. The response to the request is one or
more geo-registered map images (returned as JPEG, PNG, etc) that can be
displayed in a Geographic Information System (GIS) or in your own web
application (OpenLayers, Leaflet,\...).

The WMS supports the GetCapabilities, GetMap and GetFeatureInfo
operations as defined in the Open Geospatial Consortium (OGC) WMS
standard.

The EMODnet WMS services are accessible from 7 thematics at the
Pan-European scale or global scale for some specific data products.
Enter one of the following WMS endpoint URLs into your WMS client (QGIS,
ArcMap, MapInfo etc.):

```{r wms}
txt2md("data/wms.txt")
```


##### WMS GetCapabilities

The mandatory GetCapabilities operation allows WMS clients to retrieve
service metadata from a server. The response to a GetCapabilities
request shall be an XML document containing metadata of the service
(proposed layers, associated projections, author \...).

The standard to construct a WMS GetCapabilities request, depending on
the version:

> {wms endpoint url}?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetCapabilities

or

> {wms endpoint url}?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities

##### WMS GetMap

Using the information given in the GetCapabilities request, the GetMap
request returns a raster map containing the requested data layer
selected from all the available layers as defined in the XML document.
The elements such as the data layer, region, projection, size of the
returned image, image format, etc. are defined in the form of arguments.

Example of a GetMap request that returns an image of the EMODnet
Bathymetry Mean depth (DTM) based on source resolution of 1/8 arc minute
(\~250 meter) in multi colour style:

>   https://ows.emodnet-bathymetry.eu/wms?service=WMS&service=WMS&request=GetMap&version=1.1.1&layers=emodnet:mean_multicolour&styles=&format=image/png&transparent=true&info_format=text/html&tiled=false&width=400&height=628&srs=EPSG:3857&bbox=-2669794,2250306,4800533,14538934

Returns:

> <img src="https://ows.emodnet-bathymetry.eu/wms?service=WMS&service=WMS&request=GetMap&version=1.1.1&layers=emodnet:mean_multicolour&styles=&format=image/png&transparent=true&info_format=text/html&tiled=false&width=400&height=628&srs=EPSG:3857&bbox=-2669794,2250306,4800533,14538934" />

#### Web Map Tile Service

In contrast to a WMS service, which offers real time rendered georeferenced images for a custom geographic extent, a Web Map Tile Service (**WMTS**) serves pre-rendered georeferenced map tiles with a fixed geographic extent for different zoom levels. As images are pre-rendered and can be cached (locally or remotely), WMTS offers a superior performance for web map viewer applications. 

The EMODnet WMTS service are accessible from following endpoints:

```{r wmts}
txt2md("data/wmts.txt")
```

### Data download services

The EMODnet data layers are available as a Web Feature Service (WFS) or
Web Coverage Service (WCS) in accordance with the Open Geospatial
Consortium (OGC) specifications
([www.opengeospatial.org](http://www.opengeospatial.org)).

Note that some thematics provide other, non-OGC, web services too. For example
a central EMODnet ERDDAP server, a REST service to the EMODnet Bathymetry DTM, EMODnet Biology allows
specific parameters in the WFS requests, EMODnet Chemistry has an OPeNDAP service. See section
[Non-OGC web services](#non-ogc-web-services)

#### Web Feature Service (WFS)

WFS defines a standard for exchanging vector data by querying both the
data structure and the source data. The basic operations are
GetCapabilities, DescribeFeatureType, and GetFeature. WFS supports a
variety of WFS output formats (Ex: GML, shapefile, json, geojson,
CSV,\...). The full list of output formats supported can be found by
performing a WFS GetCapabilities request.

The EMODnet WFS services are accessible from following endpoints:

```{r wfs}
txt2md("data/wfs.txt")
```

##### WFS GetCapabilities

A GetCapabilities request generates a metadata document (xml) describing
a WFS service provided by server as well as valid WFS operations and
parameters.

##### WFS DescribeFeature

A DescribeFeature request returns a description of feature types
supported by a WFS service.

Example of a EMODnet Biology DescribeFeature request:

>   https://geo.vliz.be/geoserver/Dataportal/wfs?service=wfs&version=2.0.0&request=DescribeFeatureType&typeName=Dataportal:eurobis&outputFormat=application/json

Example of a EMODnet Human Activities DescribeFeature request:

>   https://ows.emodnet-humanactivities.eu/wfs?SERVICE=WFS&VERSION=1.1.0&request=describeFeatureType&typeName=shellfish&bbox=-1.3,0.3,49.2,49.9

##### WFS GetFeature

A GetFeature request returns a selection of features from a data source
including geometry and attribute values.

Example of a EMODnet Human Activities GetFeature request:

>   https://ows.emodnet-humanactivities.eu/wfs?SERVICE=WFS&VERSION=1.1.0&request=getFeature&typeName=shellfish&bbox=-1.3,0.3,49.2,49.9&outputFormat=application/json

##### EMODnetWFS: An R Client of EMODnet Web Feature Service data

[EMODnetWFS](https://emodnet.github.io/EMODnetWFS/) is an R package developed to access WFS data from EMODnet. You can install with:

```r
remotes::install_github("EMODnet/EMODnetWFS")
```

#### Web Coverage Service (WCS)

The EMODnet thematics provide Web Coverage Services (WCS) to support
requests for coverage data (rasters) or gridded data products. Enter one
of the following addresses into your WCS client:

```{r wcs}
txt2md("data/wcs.txt")
```

##### WCS GetCapabilities

A WCS GetCapabilities request retrieves a list of the server's data, as
well as valid WCS operations and parameters.

##### WCS DescribeCoverage

A WCS DescribeCoverage request retrieves a metadata (XML) document that
fully describes the requested coverages.

Example of an EMODnet Bathymetry DescribeCoverage request:

>   [https://ows.emodnet-bathymetry.eu/wcs?service=wcs&version=1.0.0&request=DescribeCoverage&coverage=emodnet:mean](http://ows.emodnet-bathymetry.eu/wcs?service=wcs&version=1.0.0&request=DescribeCoverage&coverage=emodnet:mean)

##### WCS GetCoverage

A WCS GetCoverage request returns a coverage in a well known format.
Like a WMS GetMap request, but with several extensions to support the
retrieval of coverages.

Example of an EMODnet Bathymetry GetCoverage request:

>   <https://ows.emodnet-bathymetry.eu/wcs?service=wcs&version=1.0.0&request=getcoverage&coverage=emodnet:mean&crs=EPSG:4326&BBOX=-2.52,45.6,-1.08,46.40&format=image/tiff&interpolation=nearest&resx=0.00208333&resy=0.00208333>

### Non-OGC web services

```{r non_ogc}
txt2md("data/non_ogc.txt")
```

### Other useful links with documentation on EMODnet web services

* Chemistry GitHub: https://github.com/gher-ulg/EMODnet-Chemistry
* Physics GitHub: https://github.com/EMODnet-Physics
* Seabed habitats GitHub: https://github.com/emodnetseabedhabitats
* Other repos in the main EMODnet GitHub: https://github.com/EMODnet

## OGC service status

Having trouble? Verify the status of the EMODnet OGC services at https://monitor.emodnet.eu.

----------------------------------------------------------------------------------------------
<p align="center">
  Provided by EMODnet. See our <a href=https://emodnet.ec.europa.eu/en/terms-use> terms of use </a>
</p>
<p align="center">
  <a href="https://emodnet.ec.europa.eu">
    <img src="https://emodnet.ec.europa.eu/sites/emodnet.ec.europa.eu/files/public/logo_2x_1.png">
  </a>
</p>
